<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'>
    
    <title>Dashboard</title>
    
    <link rel="stylesheet" href="/bootstrap-4.1.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/fontAwesome/css/all.min.css">

    <script src="/Chart.min.js" type="application/javascript"></script>

     <link rel="stylesheet" href="/stylesheets/index.css">
</head>

<body>
    <header>
        <div class="container-fluid">
            <nav class="navbar navbar-expand-md navbar-dark bg-dark">
                <a class="navbar-brand" href="/">
                    <img src="/logo.jpg" width="30" height="30" class="d-inline-block align-top" alt="">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="navbar-collapse collapse justify-content-between" id="navbarToggler">
                    <div class="navbar-nav">
                        <a href="/dashboard" class="nav-item nav-link active"><i class="fas fa-home fa-fw"></i> Dashboard</a>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Grinding
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a href="/ingots" class="dropdown-item"><i class="fas fa-barcode fa-fw"></i> Ingots</a>
                                <a href="/wheels" class="dropdown-item"><i class="fas fa-dumbbell fa-fw"></i> Wheels</a>
                            </div>
                        </li>
                    </div>
                    <div class="navbar-nav">
                        <% if(!currentUser){ %>
                            <a class="nav-item nav-link" href="/auth/login">Login</a></li>
                        <% } else { %>
                            <a class="nav-item nav-link"><%=currentUser.username.toUpperCase()%></a>
                                <% if(currentUser.isAdmin){ %>
                                    <a class="nav-item nav-link" href="/auth/register">SignUp</a>
                                <% } %>
                            <a class="nav-item nav-link" href="/auth/logout">Logout</a>
                        <% } %>
                    </div>
                </div>
            </nav>
        </div> <!-- container-fluid -->
    </header> <!-- header -->

    <main>
        <div class="container-fluid">
            <canvas id="myChart" width="400" height="100"></canvas>

            <div class="container">
                Start Date: <input id="startDate" width="276" />
                End Date: <input id="endDate" width="276" />
            </div>
        </div>
    </main>

    <footer>
            <div class="container-fluid">
                <p class="copyright float-right">&copy; Alex Wee</p>
            </div>
    </footer>
  
</body>

    <script src="/jQuery/jquery-3.3.1.min.js"></script>
    <script src="/bootstrap-4.1.3-dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="/gijgo-datepicker/js/gijgo.min.js" type="text/javascript"></script>
    <link href="/gijgo-datepicker/css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <script>
       var today = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
        $('#startDate').datepicker({
            uiLibrary: 'bootstrap4',
            iconsLibrary: 'fontawesome',
            minDate: today,
            maxDate: function () {
                return $('#endDate').val();
            }
        });
        $('#endDate').datepicker({
            uiLibrary: 'bootstrap4',
            iconsLibrary: 'fontawesome',
            minDate: function () {
                return $('#startDate').val();
            }
        });
    </script>

    <script>
        let ctx = document.getElementById("myChart").getContext('2d');
        
        Chart.defaults.line.spanGaps = true;

        Chart.defaults.global.elements.point.backgroundColor = 'red';
        Chart.defaults.global.elements.point.borderWidth = 3;
        Chart.defaults.global.elements.point.borderColor = 'red';

        Chart.defaults.global.elements.line.backgroundColor = 'rgba(0, 0, 0, 0)';
        Chart.defaults.global.elements.line.borderWidth = 1;
        Chart.defaults.global.elements.line.borderColor = '#000';

        let myChart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: 
                [
                    {
                        pointHoverBackgroundColor: 'blue',
                        pointHoverBorderColor: 'blue',
                        pointHoverBorderWidth: 3,

                        data: [20, 50, 100, 75, 25, 0],
                        label: 'Left dataset',
                        yAxisID: 'left-y-axis'
                    },
                    {
                        data: [0.1, 0.5, 1.0, 2.0, 1.5, 0],
                        label: 'Right dataset',
                        yAxisID: 'right-y-axis'
                    }
                ],
                labels: ['Red', 'Orange']
            },
            options: {
                scales: {
                    yAxes: [{
                        id: 'left-y-axis',
                        type: 'linear',
                        position: 'left'
                    }, {
                        id: 'right-y-axis',
                        type: 'linear',
                        position: 'right'
                    }]
                },
                layout: {
                    padding: {
                        left: 50,
                        right: 0,
                        top: 0,
                        bottom: 0
                    }
                },
                legend:{
                    position: 'right',
                },
                title:{
                    display: true,
                    fontSize: 18,
                    text: "EMTEC"
                },
            }
        });
        </script>
</html>